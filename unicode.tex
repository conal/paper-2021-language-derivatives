\RequirePackage{bbding}

%% \usepackage[utf8]{inputenc}  %% ignored with xelatex
%% \usepackage{amssymb}

%%%% From https://github.com/gallais/nary

%% % Misc symbols
%% \newunicodechar{′}{\ensuremath{\prime}}
%% \newunicodechar{−}{\ensuremath{-}}
%% \newunicodechar{─}{\ensuremath{-}}
%% \newunicodechar{◆}{\ensuremath{\Diamondblack}}
%% \newunicodechar{⧫}{\ensuremath{\blacklozenge}}
\newunicodechar{∷}{\ensuremath{\mathbin{::\!}}}
\newunicodechar{∙}{\ensuremath{\bullet}}
%% \newunicodechar{□}{\ensuremath{\Box}}
%% \newunicodechar{∎}{\ensuremath{\blacksquare}}
%% \newunicodechar{⋆}{\ensuremath{\star}}

% indices
\newunicodechar{₀}{\ensuremath{_0}}
\newunicodechar{₁}{\ensuremath{_1}}
\newunicodechar{₂}{\ensuremath{_2}}
\newunicodechar{₃}{\ensuremath{_3}}

%% \newunicodechar{ₖ}{\ensuremath{_k}}
%% \newunicodechar{ₘ}{\ensuremath{_m}}
\newunicodechar{ₙ}{\ensuremath{_n}}
%% \newunicodechar{ᵣ}{\ensuremath{_r}}
%% \newunicodechar{ₛ}{\ensuremath{_s}}

%% \newunicodechar{₊}{\ensuremath{_+}}

%% % exponents
%% \newunicodechar{⁺}{\ensuremath{\textsuperscript{+}}}
%% \newunicodechar{⁻}{\ensuremath{\textsuperscript{-}}}

%% \newunicodechar{²}{\ensuremath{^2}}

\newunicodechar{ⁱ}{\ensuremath{^i}}
\newunicodechar{ˡ}{\raisebox{-2pt}{\ensuremath{^l}}}
\newunicodechar{ʳ}{\raisebox{-1pt}{\ensuremath{^r}}}

%% \newunicodechar{ᴬ}{\ensuremath{^A}}
%% \newunicodechar{ᴮ}{\ensuremath{^B}}
%% \newunicodechar{ᴵ}{\ensuremath{^I}}
%% \newunicodechar{ᴿ}{\ensuremath{^R}}
%% \newunicodechar{ᵀ}{\ensuremath{^T}}
%% \newunicodechar{ᵁ}{\ensuremath{^U}}
%% \newunicodechar{ⱽ}{\ensuremath{^V}}

%% % Dots
%% \newunicodechar{⋯}{\ensuremath{\cdots}}

%% % Equality symbols
\newunicodechar{≡}{\ensuremath{\equiv}}
%% \newunicodechar{≢}{\ensuremath{\not\equiv}}
\newunicodechar{≟}{\mbox{\tiny\ensuremath{\stackrel{?}{=}}}}
\newunicodechar{≈}{\ensuremath{\approx}}

%% % Ordering symbols
%% \newunicodechar{≤}{\ensuremath{\le}}
%% \newunicodechar{≥}{\ensuremath{\ge}}

%% % Arrows
\newunicodechar{→}{\ensuremath{\rightarrow}}
%% \newunicodechar{←}{\ensuremath{\leftarrow}}
%% \newunicodechar{⇒}{\ensuremath{\Rightarrow}}
%% \newunicodechar{⇉}{\ensuremath{\rightrightarrows}}

%% % Mathematical symbols
%% \newunicodechar{∂}{\ensuremath{\partial}}
%% \newunicodechar{∋}{\ensuremath{\ni}}
%% \newunicodechar{∞}{\ensuremath{\infty}}
\newunicodechar{∀}{\ensuremath{\forall}}
\newunicodechar{∃}{\ensuremath{\exists}}
%% \newunicodechar{⊢}{\ensuremath{\vdash}}
\newunicodechar{⟨}{\ensuremath{\langle}}
\newunicodechar{⟩}{\ensuremath{\rangle}}
%% \newunicodechar{⊤}{\ensuremath{\top}}
\newunicodechar{∘}{\ensuremath{\circ}}
\newunicodechar{⊎}{\ensuremath{\uplus}}
\newunicodechar{×}{\ensuremath{\times}}
%% \newunicodechar{ℕ}{\ensuremath{\mathbb{N}}}
%% \newunicodechar{⟦}{\ensuremath{\llbracket}}
%% \newunicodechar{⟧}{\ensuremath{\rrbracket}}
\newunicodechar{∈}{\ensuremath{\in}}
%% \newunicodechar{↑}{\ensuremath{\uparrow}}
\newunicodechar{¬}{\ensuremath{\neg}}
\newunicodechar{⊥}{\ensuremath{\bot}}
%% \newunicodechar{↝}{\ensuremath{\leadsto}}
%% \newunicodechar{↶}{\ensuremath{\curvearrowleft}}
%% \newunicodechar{↺}{\ensuremath{\circlearrowleft}}
\newunicodechar{⊔}{\ensuremath{\sqcup}}
%% \newunicodechar{⨆}{\ensuremath{\bigsqcup}}
\newunicodechar{∩}{\ensuremath{\cap}}
\newunicodechar{∪}{\ensuremath{\cup}}


%%%%%%%%%%%%%%%%% LETTERS

%% % Misc
\newunicodechar{ℓ}{\ensuremath{\ell}}

%% % Greek uppercase
%% \newunicodechar{Δ}{\ensuremath{\Delta}}
%% \newunicodechar{Γ}{\ensuremath{\Gamma}}
%% \newunicodechar{Σ}{\ensuremath{\Sigma}}
%% \newunicodechar{Θ}{\ensuremath{\Theta}}
%% \newunicodechar{Ω}{\ensuremath{\Omega}}

%% % Greek lowercase
\newunicodechar{α}{\ensuremath{\alpha}}
\newunicodechar{β}{\ensuremath{\beta}}
\newunicodechar{γ}{\ensuremath{\gamma}}
\newunicodechar{δ}{\ensuremath{\delta}}
\newunicodechar{ε}{\ensuremath{\varepsilon}}
\newunicodechar{φ}{\ensuremath{\phi}}
\newunicodechar{γ}{\ensuremath{\gamma}}
\newunicodechar{ι}{\ensuremath{\iota}}
\newunicodechar{κ}{\ensuremath{\kappa}}
\newunicodechar{λ}{\ensuremath{\lambda}}
\newunicodechar{μ}{\ensuremath{\mu}}
\newunicodechar{ψ}{\ensuremath{\psi}}
\newunicodechar{η}{\ensuremath{\eta}}
\newunicodechar{ρ}{\ensuremath{\rho}}
\newunicodechar{σ}{\ensuremath{\sigma}}
\newunicodechar{τ}{\ensuremath{\tau}}
\newunicodechar{ξ}{\ensuremath{\xi}}
\newunicodechar{ζ}{\ensuremath{\zeta}}
\newunicodechar{Π}{\ensuremath{\Pi}}


%% % mathcal
%% \newunicodechar{𝓒}{\ensuremath{\mathcal{C}}}
%% \newunicodechar{𝓔}{\ensuremath{\mathcal{E}}}
%% \newunicodechar{𝓕}{\ensuremath{\mathcal{F}}}
%% \newunicodechar{𝓡}{\ensuremath{\mathcal{R}}}
%% \newunicodechar{𝓢}{\ensuremath{\mathcal{S}}}
%% \newunicodechar{𝓣}{\ensuremath{\mathcal{T}}}
%% \newunicodechar{𝓥}{\ensuremath{\mathcal{V}}}
%% \newunicodechar{𝓦}{\ensuremath{\mathcal{W}}}


%% Above I copied from gallais's TyDe'19 paper.
%% Below are my additions.

%%https://tex.stackexchange.com/questions/486120/using-the-unicode-prime-character-outside-math-mode-with-unicode-math-and-newuni
\AtBeginDocument{\newunicodechar{′}{\ensuremath{'}}}

\newunicodechar{ν}{\ensuremath{\nu}}
\newunicodechar{∨}{\ensuremath{\vee}}
\newunicodechar{∧}{\ensuremath{\wedge}}

\newunicodechar{∅}{\ensuremath{\emptyset}}
\newunicodechar{∁}{\ensuremath{\complement}}

\newunicodechar{ᵒ}{\ensuremath{^o}}

\newunicodechar{𝒰}{\ensuremath{\mathscr{U}}}

\newunicodechar{𝟏}{\ensuremath{\mathbf{1}}}

\newcommand\smallOp[2]{\ensuremath{\mathbin{\mbox{\raisebox{#1}{\scriptsize $#2$}}}}}
\newcommand\append{\smallOp{0.5pt}{+\!\!+}}

\newunicodechar{⊙}{\ensuremath{\append}}

%% \newunicodechar{ℓ}{\ensuremath{\mathcal{l}}}

\newcommand\Star[1]{\ensuremath{\mathop{\hspace{-0.0em}\raisebox{0.6ex}{\tiny #1}}}}

\newunicodechar{✯}{\Star \FiveStarOutlineHeavy}
\newunicodechar{☆}{\Star \FiveStarOutlineHeavy}
\newunicodechar{✰}{\Star \FiveStarShadow}
\newunicodechar{✶}{\Star \SixStar}
\newunicodechar{✦}{\Star \FourStarOpen}
\newunicodechar{✸}{\Star \EightStarBold}

\newunicodechar{∷}{\ensuremath{\mathbin{\hspace{-0.2em}:\hspace{-0.27em}:\!}}}

%% \newunicodechar{⋆}{\smallOp{0.75pt}{}}
%% \newunicodechar{⋆}{\raisebox{-2pt}{\Star \Asterisk}}
\newunicodechar{⋆}{\ensuremath{\ast}}
%% \newunicodechar{⋆}{\ensuremath{*}}% "*" seems fine in Libertine.

\newunicodechar{✲}{\raisebox{-0.8ex}{\hspace{-0.17em}*}}

\newunicodechar{⇔}{\ensuremath{\Leftrightarrow}}
\newunicodechar{↔}{\ensuremath{\leftrightarrow}}
\newunicodechar{⟷}{\ensuremath{\longleftrightarrow}}

\newunicodechar{⊤}{{\small \ensuremath{\top}}}

%% I haven't gotten amsmath to work, so use \Box instead of \blacksquare for now.
\newunicodechar{∎}{\ensuremath{\blacksquare}}
%% \newunicodechar{∎}{\ensuremath{\Box}}

\newunicodechar{𝟘}{\ensuremath{\mathbb{0}}}
\newunicodechar{𝟙}{\ensuremath{\mathbb{1}}}

\newunicodechar{⁻}{\ensuremath{^-}}
\newunicodechar{⁰}{\ensuremath{^0}}
\newunicodechar{¹}{\ensuremath{^1}}
\newunicodechar{²}{\ensuremath{^2}}
%% \newunicodechar{ʸ}{\ensuremath{^y}}
%% \newunicodechar{ⁿ}{\ensuremath{^{\hspace{0.3pt}n}}}
\newunicodechar{ᴸ}{\ensuremath{^L}}

\newunicodechar{ᴹ}{\ensuremath{^{\!M\!}}}

\newunicodechar{ᵀ}{\ensuremath{^τ}}
\newunicodechar{ᵗ}{\ensuremath{^T}}
\newunicodechar{ⱽ}{\ensuremath{^v}}

\newunicodechar{ₗ}{\ensuremath{_{\raisebox{2pt}{\tiny \!$l$}}}}
\newunicodechar{ᵣ}{\ensuremath{_r}}

\newunicodechar{∼}{\ensuremath{\sim}}
\newunicodechar{⌊}{\ensuremath{\lfloor}}
\newunicodechar{⌋}{\ensuremath{\rfloor}}
\newunicodechar{≗}{\ensuremath{\circeq}}

\newunicodechar{◃}{\raisebox{0.2ex}{\tiny \ensuremath{\triangleleft}}}
\newunicodechar{▹}{\raisebox{0.2ex}{\tiny \ensuremath{\triangleright}}}
\newunicodechar{◂}{\raisebox{0.2ex}{\tiny \ensuremath{\blacktriangleleft}}}
\newunicodechar{▸}{\raisebox{0.2ex}{\tiny \ensuremath{\blacktriangleright}}}

\newunicodechar{·}{\ensuremath{\cdot}}

%% Invisible characters for otherwise clashing definitions.
\newunicodechar{⇂}{}
\newunicodechar{⇃}{}

%% Unobtrusive module name. Decorate the following dot. Note vertical in ex
%% and horizontal in em to adjust with font size.
\newunicodechar{◬}{\raisebox{0.23ex}{\ensuremath{_{\diamond}\hspace{-0.352em}}}}
%% \newunicodechar{▣}{\raisebox{0.23ex}{\ensuremath{\scriptscriptstyle\box}\hspace{-0.28em}}}

%% Another good trick: cause the next symbol to be hat'd, math style, e.g., ʻν ʻδ.
%% A variation on this trick can replace a module dot, etc.
\newcommand\mathHat[1]{\ensuremath{\hat{\mbox{#1}}}}
\newunicodechar{ʻ}{\mathHat}

\newunicodechar{‽}{\ensuremath{^?}}
